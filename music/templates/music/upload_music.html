{% extends 'music/base.html' %}
{% load static %}
{% load custom_filters %}

{% block title %}上传音乐{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- 面包屑导航 -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'music_list' %}">
                    <i class="fa-solid fa-compact-disc me-1"></i>音乐库
                </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
                <i class="fa-solid fa-cloud-upload-alt me-1"></i>上传音乐
            </li>
        </ol>
    </nav>
    
    <!-- Vue组件挂载点 -->
    <div id="upload-app"></div>

    <!-- 分类数据 -->
    <script id="categories-data" type="application/json">
        {{ categories_json|safe }}
    </script>

    <!-- 上传配置 -->
    <script id="upload-config" type="application/json">
        {
            "maxFileSize": 20,
            "allowedFileTypes": ["audio/mpeg", "audio/wav", "audio/aac", "audio/mp4", "audio/x-m4a", "video/mp4", "audio/x-hx-aac-adts", "application/octet-stream"]
        }
    </script>
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'js/pages/upload-page.js' %}"></script>
{% endblock %}